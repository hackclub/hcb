<%# locals: (form:, disabled:, excluded_fields: []) %>

<% (WiseTransfer::AVAILABLE_CURRENCIES + [nil]).each do |currency| %>
  <template x-if="currency == '<%= currency.nil? ? "null" : currency[0] %>'">
    <div>
      <% Wire.information_required_for(currency.nil? ? nil : currency[0]).each do |field| %>
        <% unless (field[:key]).in?(excluded_fields) %>
        <div class="field">
          <%= form.label field[:key], field[:label], class: "mb1" %>
          <% if field[:type] == :select %>
            <%= form.select field[:key], field[:options], required: true, disabled: "", prompt: "Please select..." %>
          <% else %>
            <%= form.send(field[:type], field[:key], required: true) %>
          <% end %>
          <div class="muted mt1">
            <%= field[:description] %>
            <% if field[:refer_to] %>
              <%= link_to "Refer to this document", field[:refer_to], target: "_blank" %>
            <% end %>
          </div>
        </div>
        <% end %>
      <% end %>
    </div>
  </template>
<% end %>
