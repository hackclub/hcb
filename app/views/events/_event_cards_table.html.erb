<% if stripe_cards.blank? %>
  <%= blankslate "You don't have any #{status} cards yet." %>
<% else %>
  <article class="table-container">
    <table>
      <thead>
      <tr>
        <th>Cardholder</th>
        <th>Number</th>
        <th>Type</th>
        <th>Status</th>
        <th>Issued on</th>
      </tr>
      </thead>
      <tbody>
      <% stripe_cards.each do |c| %>
        <tr class="clickable">
          <%# Cardholder %>
          <td>
            <%= c.user.name || c.stripe_name || c.user.full_name %>
          </td>

          <%# Card number %>
          <td class="fs-mask">
            <%= c.hidden_card_number_with_last_four if organizer_signed_in? %>
            <%= c.hidden_card_number unless organizer_signed_in? %>
          </td>

          <%# Type %>
          <td>
            <%= c.virtual? ? "Virtual" : "Physical" %>
          </td>

          <%# Status %>
          <td>
            <span class="ml0 badge bg-<%= c.state %>"><%= c.state_text %></span>
          </td>

          <%# Date issued %>
          <td>
            <%= format_date c.created_at %>
            <% card_popover_title = c.initially_activated ? "Card #{c.last_four}" : "Inactive card" %>
          <%= link_to "", stripe_card_path(c), class: "stretched-link", data: @show_card_popovers && { behavior: "modal_trigger", modal: "shared_popover", popover_title: card_popover_title, popover_src: c.popover_path, popover_frame_id: "stripe_card_#{c.public_id}", popover_state_url: url_for(c), popover_external_link: url_for(c), popover_size: "sm" } if organizer_signed_in? && !@event.demo_mode %>
          </td>
        </tr>

      <% end %>
      </tbody>
    </table>
  </article>
<% end %>
