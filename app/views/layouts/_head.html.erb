<%# locals: (title_suffix: "HCB", skip_dark_js: false, custom_stylesheet: false, custom_application_js: false, skip_plausible: false, skip_console_art: false, console_art_url: nil) %>

<!-- come hack with us on hcb! <%= Rails.configuration.constants.github_url %> -->
<title>
  <%= yield(:title).concat(" â€“") if content_for?(:title) %>
  <%= title_suffix %>
</title>
<%= csrf_meta_tags %>
<%= csp_meta_tag %>
<meta name="theme-color" content="<%= @is_dark ? "#17171d" : "#f9fafc" %>">
<meta name="apple-itunes-app" content="app-id=6465424810">

<%= yield(:before_assets) if content_for?(:before_assets) %>

<%= javascript_include_tag "dark", 'data-turbo-track': "reload" %>
<%= stylesheet_link_tag "application", media: "all", 'data-turbo-track': "reload" unless custom_stylesheet %>
<%= yield(:custom_stylesheet) if content_for?(:custom_stylesheet) %>
<%= javascript_include_tag "application", 'data-turbo-track': "reload", defer: true unless custom_application_js %>
<%= yield(:custom_application_js) if content_for?(:custom_application_js) %>
<%= javascript_include_tag "bundle", 'data-turbo-track': "reload", defer: true %>

<%= yield(:additional_scripts) if content_for?(:additional_scripts) %>

<% if Rails.env.production? && !skip_plausible %>
  <script defer data-domain="hcb.hackclub.com" src="https://plausible.io/js/script.pageview-props.tagged-events.js"></script>
<% end %>

<% unless Rails.env.production? %>
  <meta name="turbo-prefetch" content="false">
<% end %>

<% if Rails.env.production? && !skip_console_art %>
  <script>
    console.log(`%c                -*%@@%*-
              .=#@@@@@@@@@@#=.
          .=%@@@@@*-..-*@@@@@%=.
        -#@@@@@+:        :+@@@@@#-
      :*@@@@@*:              :*@@@@@*:
    =%@@@@#-                    -#@@@@%=.
  *@@@@@+.                        .+@@@@@*
  *@@*-   *@@*      *@@*      *@@*   :*@@*
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          @@@@      @@@@      @@@@
          *@@*      *@@*      *@@*

    *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*
    *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*

          Come hack on HCB with us!
  <%= console_art_url || Rails.configuration.constants.github_url %> <%# erb_lint:disable ErbSafety %>
  `, 'color: #ec3750; font-weight: bold; font-size: 10px;')
  </script>
<% end %>

<meta name="format-detection" content="telephone=no">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<% if content_for?(:favicon) %>
  <%= yield :favicon %>
<% elsif user_birthday? %>
  <link rel="icon" type="image/png" href="/favicon-party.gif">
<% else %>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-<%= Rails.env %>-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-<%= Rails.env %>-16x16.png">
<% end %>
<link rel="manifest" href="/site.webmanifest">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ec3750">
<meta name="msapplication-TileColor" content="#ec3750">
<%= yield(:additional_head_tags) if content_for?(:additional_head_tags) %>
<%= yield(:head) if content_for?(:head) %>
