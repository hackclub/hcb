<% title "Referral Programs" %>

<ul>
  <% @referral_programs.each do |program| %>
    <li>
      <div class="flex flex-row items-center border p-4 gap-8 w-100 mb-0">
        <div class="flex flex-col">
          <h5 class="m-0 p-0"><%= program.name %></h5>
          <small class="text-muted"><%= program.created_at.strftime("%Y-%m-%d") %> • <code><%= program.hashid %></code></small>
        </div>
        <div class="flex flex-row gap-2 justify-between m-0">
          <span class="m-0"><%= pluralize(program.users.size, "user") %> • <%= pluralize(program.new_users.size, "new user") %></span>
        </div>
        <%= link_to program_url(program), program_url(program) %>

        <div class="flex-grow"></div>

        <div class="flex flex-row gap-2">
          <%= link_to users_admin_index_path(referral_program_id: program.id) do %>
            <button>View users</button>
          <% end %>
        </div>
      </div>
    </li>
  <% end %>
</ul>

<%= form_with model: false, local: true, url: referral_program_create_admin_index_path, class: "flex flex-row gap-2" do |form| %>
  <fieldset>
    <legend>Create a referral program</legend>
    <%= form.label :name, "Program name" %>
    <%= form.text_field :name, placeholder: "Program Name", required: true, class: "w-100" %>
    <br>
    <%= form.submit "Create", class: "btn bg-success" %>
  </fieldset>
<% end %>
