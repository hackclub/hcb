<%# locals: (form:) %>

<%= form.label :role, class: "mb1" %>
<div class="field field--options flex">
  <% OrganizerPositionInvite.roles.keys.map do |role| %>
    <%= form.radio_button :role, role, "x-model": "role" %>
    <%= form.label :role, value: role do %>
      <strong><%= role.titleize %></strong>
    <% end %>
  <% end %>
</div>

<p class="muted mb1"><span class="bold info">Managers</span> can do everything
  in the organization.</p>

<div class="muted mb1">
  <p class="m0"><span class="bold info">Members</span> can:</p>
  <ul class="m0">
    <li>Create & use cards (with a limit if spending controls are enabled)
    </li>
    <li>Not transfer money</li>
    <li>Not change the organization's settings</li>
  </ul>
</div>

<p class="muted mb1"><span class="bold info">Readers</span> have read-only access to the organization.</p>

<% if Flipper.enabled?(:spending_controls_2024_06_03, @event || invite.event) %>
  <div x-show="role === 'member'" x-cloak x-transition.duration.500ms class="my-4">
    <%= form.label :enable_controls, class: "mb1 inline-flex flex-col" do %>
      Enable spending controls?
      <span class="muted h6">You can always enable & configure spending controls after, too.</span>
    <% end %>

    <div class="field field--options">
      <%= form.radio_button :enable_controls, false, "x-model": "spendingControls" %>
      <%= form.label :enable_controls, value: false do %>
        <strong>No</strong>
      <% end %>

      <%= form.radio_button :enable_controls, true, "x-model": "spendingControls" %>
      <%= form.label :enable_controls, value: true do %>
        <strong>Yes</strong>
      <% end %>
    </div>

    <div x-show="spendingControls === 'true'" x-cloak x-transition.duration.500ms class="mb1">
      <%= form.label :initial_control_allowance_amount, value: "Initial allowance amount" %>
      <%= form.number_field :initial_control_allowance_amount, placeholder: "500.00", step: 0.01, min: 0.00, data: { controller: "truncate-decimal", action: "truncate-decimal#truncate blur->truncate-decimal#pad" } %>
    </div>
  </div>
<% end %>
