<% if current_user.teenager? && Referral::Program.find_by(id: 3)&.users&.where(id: current_user.id)&.any? && Date.current.month == 6 %>
  <% raffle_program = "robotics-flipper-zero-raffle-june-2025" %>
  <% already_joined = Raffle.where(user: current_user, program: raffle_program).any? %>

  <%= link_to already_joined ? "javascript:void(0);" : new_raffle_path(program: raffle_program), class: "w-full no-underline text-inherit #{"cursor-default" if already_joined}" do %>
    <div class="card card--hover flex flex-col flex-wrap h-full mx-auto card--background-image text-left mt-4" style="--bg-image: url('https://hc-cdn.hel1.your-objectstorage.com/s/v3/de28bfdfb4520a4d815e94ee58ab926c97a8e2f0_image.png'); background-position: top">
      <div class="flex gap-2 items-center mb-4">
        <span>üê¨</span>
        <strong class="text-xl leading-tight">
          Join the Flipper Zero Raffle
        </strong>
      </div>
      <div class="flex gap-2 md:gap-6 flex-col md:flex-row w-full">
        <p class="m-0 text-balance">
          HCB is raffling away a Flipper Zero for teenagers who are part of any
          robotics program! Join the raffle for your chance to win!
          For teenagers only. Raffle winners will be selected
          on June 30th, 2025.
          <% if already_joined %>
            <span class="italic block mt-2 text-sm">
              You have already joined the raffle.
            </span>
          <% end %>
        </p>
        <div class="flex gap-2">
          <img src="https://hc-cdn.hel1.your-objectstorage.com/s/v3/4f997b30150882281aecb29595abda0dddf40409_image.png" height="96" width="96" class="rounded align-bottom object-cover tooltipped tooltipped--w" alt="$100 Amazon Gift Card" aria-label="$100 Amazon Gift Card">
        </div>
      </div>
    </div>
  <% end %>
<% end %>
