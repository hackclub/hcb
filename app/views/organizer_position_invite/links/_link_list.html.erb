<%# locals: (event:, invite_links:) %>

<% if invite_links.empty? %>
  <p><%= event.name %> does not currently have any active invite links</p>
<% else %>
  <% invite_links.each do |link| %>
    <div class="overflow-visible justify-between items-center gap-2">
      <span class="w-full flex gap-2 items-center align-middle">
          <div class="flex flex-col">
            <%= link_to link_url(link), class: "gap-1 my-0 font-bold flex items-center" do %>
              <%= link.hashid %>
              <%= inline_icon "copy", size: 24 %>
            <% end %>
            <p class="my-0 mt-1 text-sm flex items-center gap-1 text-muted">
              <%= user_mention link.creator %>
              <span class="tooltipped -ml-1.5" aria-label="Created <%= link.created_at.strftime("%B %e, %Y") %>">
                &bull; Expires <%= distance_of_time_in_words(Time.now, link.expires_in.seconds.from_now) %>
              </span>
            </p>
          </div>
          <div class="flex-grow"></div>
          <div class="tooltipped flex items-center text-muted mr-2 cursor-pointer" aria-label="Used <%= pluralize(link.requests.size, "times") %>">
              <%= inline_icon "link", size: 24 %>
              <%= link.requests.size %>
          </div>
          <%= pop_icon_to "delete",
                          deactivate_link_path(link),
                          class: "error tooltipped",
                          data: {
                            turbo_frame: "_top",
                            turbo_method: :post,
                            turbo_confirm: "Are you sure you want to deactivate this invite link?",
                          },
                          "aria-label": "Deactivate invite link",
                          disabled: !policy(link).deactivate? %>
      </span>
      <div class="menu__divider"></div>
    </div>
  <% end %>
<% end %>
