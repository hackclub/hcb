<%# locals: (card_grant:) %>

<% purpose_tooltip = policy(card_grant).edit? ? "Set this grant's purpose" : "You don't have permission to perform this action" %>
<div class="tooltipped tooltipped--n" aria-label="<%= purpose_tooltip %>">
  <%= link_to edit_card_grant_path(card_grant),
              class: "btn bg-success",
              data: { behavior: "modal_trigger", modal: "edit_card_grant" },
              disabled: !policy(card_grant).edit? do %>
    <%= inline_icon "edit" %>
    Set purpose
  <% end %>
</div>

<section class="modal modal--scroll bg-snow" data-behavior="modal" role="dialog" id="edit_card_grant">
  <%= modal_header "What's this grant for?" %>
  <%= render "card_grants/edit_form" %>
</section>
